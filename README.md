README Comet-PTM
================

**Comet-PTM** is a modified version of the [Comet](http://comet-ms.sourceforge.net/) project for the thorough analysis of post-translational modifications, developed at the [Cardiovascular Proteomics laboratory at CNIC (Spain)](https://www.cnic.es/).

Here we will describe the details that are different in Comet-PTM, especially the Comet-PTM specific parameters and its output. For the remaining parameters and output common with the original version of Comet, you have complete documentation at http://comet-ms.sourceforge.net/

## Input information

Params files used in Comet-PTM are identical to the params file in Comet, with the exception of the following section:

```
#
# CNIC / comet-iq / comet-PTM specific
#
# do deltaX search for: (-delta_tolerance_outer < deltaMass < -delta_tolerance_inner) OR
#                       (+delta_tolerance_inner < deltaMass < +delta_tolerance_outer)
#
use_delta_xcorr          = 1     # 0=no (default), 1=yes
delta_outer_tolerance    = 500   # ignored if use_delta_xcorr 0, default 320 
delta_inner_tolerance    = 0     # ignored if use_delta_xcorr 0, default 0.8
use_delta_back_jumps     = 0     # 0=no (default), 1=yes
use_delta_forward_jumps  = 0     # 0=no (default), 1=yes
dont_calc_pseudo_non_mod = 1     # 0=yes, calculate pseudo nonmod (default), 1=avoid calculating pseudo non_mod
```

- *use_delta_xcorr*, checks whether the DeltaXCorr (the mass difference between the theoretical mass of the peptide identified and the experimental mass of potentially modified peptides) will be used or not (this is needed to use Comet-PTM).
- *delta_outer_tolerance*, the tolerance in Da for the maximum Delta XCorr that should be considered to calculate the mass of the modified peptide.
- *delta_inner_tolerance*, the minimum value of the Delta Xcorr, under which a mass difference is not taken into consideration (for being considered a non-modified peptide).
- *use_delta_back_jumps*, to consider isotopologues <i>after</i> the peak analyzed.
- *use_delta_forward_jumps*, to consider isotopologues <i>before</i> the peak analyzed.
- *dont_calc_pseudo_non_mod*, by default the nonmodified peptide is included among search results; by activating this parameter, those peptides will not be presented.

## Output information

Depending on the options in the params file, the output information can be in a number of formats. For handling information we recommend using the tab-separated tables generated by setting ```output_txtfile = 1```
```
output_txtfile = 1                     # 0=no, 1=yes  write tab-delimited txt file
```

The generated file contains a number of columns. The following columns are the same as the columns used in regular [Comet](http://comet-ms.sourceforge.net/): *scan, num, charge, exp_neutral_mass, calc_neutral_mass, e-value, xcorr, delta_cn, sp_score, ions_matched, ions_total, plain_peptide, retention_time, modifications* (in regular comet this column appears at the end)*, prev_aa, next_aa, protein, protein_count*. The column *modified_peptide* does not appear as such in Comet-PTM.

The columns described below are Comet-PTM specific:

- *exp_mz*, the experimental *m/z* calculated as *exp_neutral_mass - proton_mass \* z*.
- *q_score*, dot product of intensities of matched ions.
- *peptide*, same as *plain_peptide*, but including previous and posterior amino acids.
- *delta_mods*, the mass difference between the theoretical (non-modified) peptide and the modified peptide calculated and assigned to the residue, calculated as *exp_neutral_mass - calc_neutral_mass*.
- *b_series_delta_mods*, the fragments of the b-series that have been observed to have a displacement of mass *delta_mods*. Every fragment that has been observed with such mass shift is followed by the "<" character.
- *y_series_delta_mods*, sama as previous, but for the y-series fragments. Every fragment that has been observed with such mass shift is preceded by the ">" character.
- *delta_jumps*, can be '-2', '-1', '0', '+1', '+2', and shows the backward/forward correction to select the monoisotopic peak from the isotopic envelope (deprecated, for regular options it always shows '0').
- *delta_peptide*, shows the sequence presented in *plain_peptide*, but including the mass shift observed in *delta_mods* in brackets.
